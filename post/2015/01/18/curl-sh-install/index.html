
<!DOCTYPE html>
<html lang="ja-jp">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta content="b4b4r07, babarot" name="keywords">
<meta content="b4b4r07" name="author">
<meta property="og:title" content="dotfiles を curl -L dot.hoge.com | sh でインストールする方法 - tellme.tokyo">
<meta property="og:url" content="https://tellme.tokyo/post/2015/01/18/curl-sh-install/">
<meta property="og:description" content="Masaki ISHIYAMA">
<meta property="og:type" content="website" />

<meta property="og:image" content="https://raw.githubusercontent.com/b4b4r07/tellme.tokyo/master/static/images/profile.jpg">
<meta name="twitter:image" content="https://raw.githubusercontent.com/b4b4r07/tellme.tokyo/master/static/images/profile.jpg">

<title>dotfiles を curl -L dot.hoge.com | sh でインストールする方法 | tellme.tokyo</title>
<link rel="stylesheet" href="https://tellme.tokyo/css/style.css">
<link rel="stylesheet" href="https://tellme.tokyo/css/custom.css">
<link rel="stylesheet" href="https://tellme.tokyo/css/highlight-solarized-light.css">
<link rel="shortcut icon" href="https://tellme.tokyo/favicon.ico">
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/github.min.css">


<section class="section">
  <div class="container">
    <nav class="nav">
      <div class="nav-left">
        <a class="nav-item" href="https://tellme.tokyo"><h1 class="title is-4">tellme.tokyo</h1></a>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile">
          
          <a class="level-item" href="https://github.com/b4b4r07" target="_blank">
            <span class="icon">
              <i class="fa fa-github"></i>
            </span>
          </a>
          
          <a class="level-item" href="https://twitter.com/b4b4r07" target="_blank">
            <span class="icon">
              <i class="fa fa-twitter"></i>
            </span>
          </a>
          
        </nav>
      </div>
    </nav>
  </div>
</section>

<section class="section">
  <div class="container">
    <h1 class="title">dotfiles を curl -L dot.hoge.com | sh でインストールする方法</h1>
    <h2 class="subtitle is-5">January 18, 2015 </h2>
    
      <div class="tags">
    
        <a class="button is-link" href="/tags/shell">shell</a>
    
        <a class="button is-link" href="/tags/dotfiles">dotfiles</a>
    
</div>

    
    <br>
    <div class="content">
      
        <a href="http://b4b4r07.hatenadiary.com/entry/2015/01/18/235212">元記事</a><br><br>
      
      

<p>dotfiles をインストールする際に、</p>
<div class="highlight"><pre class="chroma"><code class="language-console" data-lang="console">$ curl -L https://raw.githubusercontent.com/{YOUR_ACCOUNT}/dotfiles/master/install.sh | bash</code></pre></div>
<p>といった具合にウェブを介してスクリプトを実行することが一般的になりつつあると思いますが、この方法にはひとつ問題がありそれは URL 部分が長いということです。これは結構厄介で長すぎるがゆえに暗記できないので、いちいちブラウザを起動してコピペしないといけなかったり、そもそもブラウザなどないようなどこかのサーバにデプロイするときなど、暗記していたほうがいい場面が結構あります。</p>

<blockquote>
<p><a href="http://orgachem.hatenablog.com/entry/2014/05/13/001100">curl -sL dot.hoge.com | sh で自分専用環境を構築する方法（かっこいい）</a></p>
</blockquote>

<p>そんなとき、このエントリを発見しました。
独自ドメインを取得して、そのサブドメインに自分で立ち上げた Nginx で dotfiles リポジトリへリダイレクトしてやるようにする方法です。こうすることで、github の URL 部分を自分のドメインを使った好きな URL にすることができるようになります。</p>

<p>しかし、この方法はサーバと独自ドメインの2つを用意しなければなりません。エンジニアたるものサーバやドメインは持っていたほうがいいのかもしれませんが、持っていなかった場合 dotfiles の URL 短縮のためだけに維持費に数千円／年を支払うのはもったいないですよね。</p>

<p>そこで、利用するのが短縮 URL サービスです。最近ではとても身近なものになり、スタンダードになりつつある <a href="https://bitly.com">Bitly</a> をはじめ Amazon 専用の amzn.to や Google の goo.gl などとても増えてきています。</p>

<p>その中でも、今回はカスタムドメインを指定できる <a href="https://bitly.com">Bitly</a> を使用します。これでリダイレクトさせるウェブページを作成する必要がなくなり、サーバ代を浮かすことが出来ます（注：ただし独自ドメインは取得する必要があります）。</p>

<h2 id="事前準備">事前準備</h2>

<h3 id="独自ドメインの取得">独自ドメインの取得</h3>

<ul>
<li><a href="http://muumuu-domain.com">ムームードメイン</a></li>
<li><a href="http://お名前.com">お名前.com</a></li>
</ul>

<p>有名どころですとサクッと取得することができます。
個人情報を入力し、年額を支払い、振込が確認された後、認証まで数時間たつとドメイン取得となります！</p>


<figure >
  
    <img
    src="/images/curl-sh-install/1.png"
    
    width="500"
    />
    
  
</figure>



<p>ここらへんは100円／年台からなのでとても安価です。</p>

<h3 id="bitly-アカウント作成">Bitly アカウント作成</h3>

<p>無料アカウントを作成します。最近までは Bitly Pro という有料サービスでカスタムドメインの設定を提供していましたが、今では無料アカウントに開放しています。</p>

<h2 id="カスタムドメインの設定">カスタムドメインの設定</h2>

<p>さて、ここからが本番です。ここからは筆者の環境（ <a href="http://muumuu-domain.com">ムームードメイン</a>）で説明していきます。 <a href="http://muumuu-domain.com">ムームードメイン</a>のサイトにいき、</p>


<figure >
  
    <img
    src="/images/curl-sh-install/2.png"
    
    width="500"
    />
    
  
</figure>



<p>「ムームーDNS」＞「変更」と進んでいき、設定2のペインある入力欄に必要事項を書き込みます。</p>

<ul>
<li><strong>名前</strong>に入力したものはサブドメインになります。<strong>dot</strong> とした場合、<code>dot.hoge.com</code> とできます。空欄の場合は、<code>hoge.com</code> です。</li>
<li><strong>レコード</strong>は A を選択します</li>
<li><strong>内容</strong>は「69.58.188.49」としてください</li>
</ul>

<p>あとは「セットアップ情報変更」をクリックでOKです。これらの操作は慎重を期して行うべきため、各所で変更の同意を問うようなダイアログが出ると思いますが確認してOKすればいいです。</p>


<figure >
  
    <img
    src="/images/curl-sh-install/3.png"
    
    width="500"
    />
    
  
</figure>



<p>次は、<a href="https://bitly.com">Bitly</a> の設定です。</p>


<figure >
  
    <img
    src="/images/curl-sh-install/4.png"
    
    width="250"
    />
    
  
</figure>



<p>「Setting」＞「Advanced」＞「Branded Short Domain」とすすみ、先ほど取得したサブドメイン <code>dot.hoge.com</code> を打ち込み Add します。
そして Verify します。DNS の設定が浸透されるまで、少し待ちます。数秒から数十秒（環境によっては数十分かかる場合も）で反応が帰ってきます。
（注：先に Profile タブでメール設定を Verify する必要があります）</p>


<figure >
  
    <img
    src="/images/curl-sh-install/5.png"
    
    width="700"
    />
    
  
</figure>



<p>最後の仕上げです。</p>

<p>Branded Short Domain Root Redirect の設定です。これは、カスタムドメインの URL のルートのリダイレクトの設定です。本来、Bitly などの短縮 URL サービスは <code>my.domain.com/1B0Ozsdfgag</code> というような URL の場合、スラッシュ以降のランダム文字列を必要をしますが、この設定をするとルート（スラッシュ以前）でリダイレクトさせることが出来ます。つまり、<code>dot.hoge.com</code> を github の raw ページにリダイレクトさせることが出来ます。</p>

<p>完成！<a href="https://raw.github.com/b4b4r07/dotfiles/master/etc/install">dot.b4b4r07.com</a></p>

<p>参考サイト：</p>

<ul>
<li><a href="http://yuhnote.com/2012/04/23/bitly-custom-domain/">bit.lyに独自ドメインを設定してオリジナルの短縮URLを作ってみた</a></li>
<li><a href="http://cmshikaku.com/feature/?p=1583">独自ドメインで短縮URLを運用する</a></li>
<li><a href="http://blog.tomget.com/?p=680">bitly 独自ドメインで短縮する</a></li>
</ul>

    </div>
    <br>
    <div class="social">
  
  
    
    <a href="https://twitter.com/share" class="twitter-share-button" data-via="b4b4r07" data-count="horizontal" lang="en">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
  
  
    
      <a href="http://b.hatena.ne.jp/entry/http://b4b4r07.hatenadiary.com/entry/2015/01/18/235212" class="hatena-bookmark-button" data-hatena-bookmark-layout="simple-balloon" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a><script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
    
  
  
  
</div>

  </div>
</section>


<section class="section">
  <div class="container has-text-centered header-logo">
    <a href="https://b4b4r07.github.io"><img src="/images/profile.jpg" width="64" height="64"></a><br><br>
    <p>Copyright &copy; 2020 BABAROT All Right Reserved.</p>
  </div>
</section>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js" integrity="sha256-KbfTjB0WZ8vvXngdpJGY3Yp3xKk+tttbqClO11anCIU=" crossorigin="anonymous"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/go.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/dockerfile.min.js"></script>

<script>hljs.initHighlightingOnLoad();</script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-44183504-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



